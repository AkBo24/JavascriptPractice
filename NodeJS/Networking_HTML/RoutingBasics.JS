/*
*  So far, the other websites in this directory will all look the same regardless
*  of the url the user inputs
*
*  (ie the website generated by 127.0.0.1:3000/ will look the same as
*  127.0.0.1:3000/api/contacts)
*
*  The reqest object when creating a server has a url field that contains the
*  current url, we can use if statements to change the data printed out to the
*  by returning different data to the server
*/

const http = require('http');
const fs   = require('fs');

let readableStream;

const server = http.createServer( (req, res) => {
  console.log(req.url);
  readableStream = fs.createReadStream('website.html', 'utf8');

  if(req.url === '/' || req.url ==='/home') {
    res.writeHead(200, {'Content-Type': 'text/html'});
    readableStream.pipe(res);
  }
  else if(req.url === '/api/todo') {
    const todo = {
      Task1: 'Laundry',
      Task2: 'Homework'
    };
    res.end(JSON.stringify(todo));
  }
  else{
    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.end('Error 404');
  }

});

server.listen(3000, '127.0.0.1');
console.log('listening to server');
